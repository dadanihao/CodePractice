早期短链接广泛应用于图片上传网站，通过缩短网址URL链接字数，达到减少代码字符串的目的。常见于网店图片分类的使用，因有字符个数限制，采用短链接可以达到外链图片的目的。自微博盛行以来，在微博字数有限的特色下，短链接也盛行于微博网站，以节省字数给博主发布更多文字的空间。
问题描述：设计一个短链生成和查询系统，需要提供以下两个功能：
    1、提供长链转换短链的接口
    2、点击短链能跳转到对应的长链
题目要求：
    1、同一个长链生成同一个短链接，不要有多个短链指向同一个长链。
    2、同一个短链只能指向某一个长链，短链生成后要固定不变，不能再指向其它长链。
    3、给出系统架构，需要考虑高并发解决方案。
    4、考虑存储和缓存方案
数据量预估：
    1、预计长链接总量500亿
    2、长链换短链请求量：10W qps
    3、短链跳转请求量：100W qps


参考答案：
设计：
1、长链转短链
发号器，每过来一个长链换短链请求发一个号，发号器所发号码从 00 自增，所发号码为十进制，转化为 6262 进制后作为短链（6262 进制对应 2626 小写字母加上 2626大写字母还有 1010 数字）。
2、短链跳转长链
将短链所对应号码与长链一一映射存储于表中。

优化：
1、长链对应唯一短链
当长链转短链请求过来时率先在字典树（映射）中查找该长链是否已经分配短链，如果分配，则直接返回短链，若未分配则利用发号器继续分配。字典树在发号同时建立。
2、系统架构与高并发
采用 key−valuekey−value 分布式储存系统，创建更多发号器，减小发号请求高并发时的压力，比方说创建 1000010000 个发号器，发号器编号从 0∼99990∼9999，对应每个发号器分别只发送以 0∼99990∼9999 为尾号的号码，每个发号器对应一片内存存储所发号码与长链对应的表，减小跳转访问高并发时的压力。
3、存储和缓存
利用分布式系统，采用 NoSqlNoSql 数据库存储彼此一一映射，采用 LRULRU （最近最久未使用）算法管理内存与缓存。
4、其他
砸钱就好了！！！有钱真的可以为所欲为……


